audit:
  # Conf is optional configuration for Audit.
  enabled: false # Enabled defines whether audit logging is enabled.
  backend: local # Backend states which backend to use for Audits.
  accessLogsEnabled: true # AccessLogsEnabled defines whether access logging is enabled.
  decisionLogsEnabled: true # DecisionLogsEnabled defines whether logging of policy decisions is enabled.%!s(MISSING)
  local:
    # Conf is optional configuration for local Audit.
    storagePath: /path/to/dir # Path to store the data
    retentionPeriod: 168h # How long to keep records for
    advanced: 
      bufferSize: 256 
      maxBatchSize: 32 
      flushInterval: 1s 
      gcInterval: 60s%!s(MISSING)
auxData:
  # Conf is optional configuration for Auxdata.
  jwt: # JWT holds the configuration for JWTs used as an auxiliary data source for the engine.
    keySets: 
      - id: ks1
        remote:
          url: https://domain.tld/.well-known/keys.jwks # KeySets is the list of keysets to be used to verify tokens.
    disableVerification: false # DisableVerification disables JWT verification.%!s(MISSING)
engine:
  # Conf is optional configuration for engine.
  defaultPolicyVersion: "default" # DefaultPolicyVersion defines what version to assume if the request does not specify one.%!s(MISSING)
schema:
  # Conf is optional configuration for schema validation.
  enforcement: reject # Enforcement defines level of the validations. Possible values are none, warn, reject.%!s(MISSING)
server:
  # Conf is required configuration for the server.
  httpListenAddr: ":3592" # Required. HTTPListenAddr is the dedicated HTTP address.
  grpcListenAddr: ":3593" # Required. GRPCListenAddr is the dedicated GRPC address.
  tls: # TLS defines the TLS configuration for the server.
    cert: /path/to/certificate # Cert is the path to the TLS certificate file.
    key: /path/to/private_key # Key is the path to the TLS private key file.
    caCert: /path/to/CA_certificate # CACert is the path to the optional CA certificate for verifying client requests.
  cors: # CORS defines the CORS configuration for the server.
    disabled: false # Disabled sets whether CORS is disabled.
    allowedOrigins: ['*'] # AllowedOrigins is the contents of the allowed-origins header.
    allowedHeaders: ['content-type'] # AllowedHeaders is the contents of the allowed-headers header.
    maxAge: 10s # MaxAge is the max age of the CORS preflight check.
  metricsEnabled: true # MetricsEnabled defines whether the metrics endpoint is enabled.
  logRequestPayloads: false # LogRequestPayloads defines whether the request payloads should be logged.
  playgroundEnabled: false # PlaygroundEnabled defines whether the playground API is enabled.
  adminAPI: # AdminAPI defines the admin API configuration.
    enabled: true # Enabled defines whether the admin API is enabled.
    adminCredentials: # AdminCredentials defines the admin user credentials.
      username: cerbos # Username is the hardcoded username to use for authentication.
      passwordHash: JDJ5JDEwJEdEOVFzZDE2VVhoVkR0N2VkUFBVM09nalc0QnNZaC9xc2E4bS9mcUJJcEZXenp5OUpjMi91Cgo= # PasswordHash is the base64-encoded bcrypt hash of the password to use for authentication.%!s(MISSING)
  blob:
    # Conf is required (if driver is set to 'blob') configuration for cloud storage driver.
    bucket: "s3://my-bucket-name?region=us-east-2" # Required. Bucket URL (Examples: s3://my-bucket?region=us-west-1 gs://my-bucket azblob://my-container).
    prefix: policies # Prefix specifies a subdirectory to download.
    workDir: ${HOME}/tmp/cerbos/work # WorkDir is the local path to check out policies to.
    updatePollInterval: 15s # UpdatePollInterval specifies the interval to poll the cloud storage. Set to 0 to disable.
    downloadTimeout: 30s # DownloadTimeout specifies the timeout for downloading from cloud storage.
    requestTimeout: 10s # RequestTimeout specifies the timeout for an HTTP request.%!s(MISSING)
  disk:
    # Conf is required (if driver is set to 'disk') configuration for disk storage driver.
    directory: pkg/test/testdata/store # Required. Directory is the path on disk where policies are stored.
    watchForChanges: false # Required. WatchForChanges enables watching the directory for changes.%!s(MISSING)
  git:
    # Conf is required (if driver is set to 'git') configuration for Git storage driver.
    protocol: file # Required. Protocol is the Git protocol to use. Valid values are https, ssh, and file.
    url: file://${HOME}/tmp/cerbos/policies # Required. URL is the URL to the Git repo.
    branch: policies # Branch is the branch to checkout.
    subDir: policies # SubDir is the path under the checked-out Git repo where the policies are stored.
    checkoutDir: ${HOME}/tmp/cerbos/work # CheckoutDir is the local path to checkout the Git repo to.
    ssh: # SSH holds auth details for the SSH protocol.
      user: git # The git user. Defaults to git.
      privateKeyFile: ${HOME}/.ssh/id_rsa # The path to the SSH private key file.
      password: pw # The password to the SSH private key.
    https: # HTTPS holds auth details for the HTTPS protocol.
      username: cerbos # The username to use for authentication.
      password: ${GITHUB_TOKEN} # The password (or token) to use for authentication.
    operationTimeout: 60s # OperationTimeout specifies the timeout for git operations.
    updatePollInterval: 60s # UpdatePollInterval specifies the interval to poll the Git repository for changes. Set to 0 to disable.%!s(MISSING)
  mysql:
    # Conf is required (if driver is set to 'mysql') configuration for mysql driver.
    dsn: "user:password@tcp(localhost:3306)/db?interpolateParams=true" # Required. Data source name
    connPool: 
      maxLifeTime: 60m
      maxIdleTime: 45s
      maxOpen: 4
      maxIdle: 1 
    tls: 
      mytls:
        cert: /path/to/certificate
        key: /path/to/private_key
        caCert: /path/to/CA_certificate 
    serverPubKey: 
      mykey: testdata/server_public_key.pem%!s(MISSING)
  postgres:
    # Conf is required (if driver is set to 'postres') configuration for postres driver.
    url: "postgres://user:password@localhost:port/db" # Required. URL is the Postgres connection URL. See https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING
    connPool: 
      maxLifeTime: 60m
      maxIdleTime: 45s
      maxOpen: 4
      maxIdle: 1%!s(MISSING)
  sqlite3:
    # Conf is required (if driver is set to 'sqlite3') configuration for sqlite3 driver.
    dsn: ":memory:?_fk=true" # Required. Data source name%!s(MISSING)
tracing:
  # Conf is optional configuration for tracing.
  sampleProbability: 0.1 # SampleProbability is the probability of sampling expressed as a number between 0 and 1.
  exporter: jaeger # Exporter is the type of trace exporter to use.
  jaeger: # Jaeger configures the Jaeger exporter.
    serviceName: cerbos # ServiceName is the name of the service to report to Jaeger.
    agentEndpoint: "localhost:6831" # AgentEndpoint is the Jaeger agent endpoint to report to.
    collectorEndpoint: "http://localhost:14268" # CollectorEndpoint is the Jaeger collector endpoint to report to.%!s(MISSING)
