{{define "request"}}
#[derive(Serialize, Deserialize)]
struct ResourceAttr {
{{ range $prop := . }} {{template "field" $prop}}
{{end -}}
}

#[derive(Serialize, Deserialize)]
struct Resource {
    id: String,
    attr: ResourceAttr,
}

#[derive(Serialize, Deserialize)]
struct Principal {
    id: String,
    roles: Vec<String>,
{{/*    attr: PrincipalAttr,*/}}
}

#[derive(Serialize, Deserialize)]
struct Request {
    request_id: String,
    action: String,
    principal: Principal,
    resource: Resource,
}
{{end}}