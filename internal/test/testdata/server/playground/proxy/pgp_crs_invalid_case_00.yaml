---
description: "Invalid CheckResourceSet request"
wantStatus:
  httpStatusCode: 400
  grpcStatusCode: 3
wantError: true
playgroundProxy:
  input: {
    "playgroundId": "test",
    "policyFiles": [
      {
        "fileName": "derived_roles_01.yaml",
        "contents": "{{ .Files.Get `store/derived_roles/derived_roles_01.yaml` | base64encode }}",
      },
      {
        "fileName": "derived_roles_02.yaml",
        "contents": "{{ .Files.Get `store/derived_roles/derived_roles_02.yaml` | base64encode }}",
      },
      {
        "fileName": "resource.yaml",
        "contents": "LS0tCmFwaVZlcnNpb246IGFwaS5jZXJib3MuZGV2L3YxCnJlc291cmNlUG9saWN5OgogIGltcG9ydERlcml2ZWRSb2xlczoKICAtIG15X2Rlcml2ZWRfcm9sZXMKICByZXNvdXJjZTogbGVhdmVfcmVxdWVzdAogIHJ1bGVzOgogIC0gYWN0aW9uczogWycqJ10KICAgIGVmZmVjdDogRUZGRUNUX0FMTE9XCiAgICByb2xlczoKICAgIC0gYWRtaW4KICAtIGFjdGlvbnM6IFsiY3JlYXRlIl0KICAgIGRlcml2ZWRSb2xlczoKICAgIC0gZW1wbG95ZWVfdGhhdF9vd25zX3RoZV9yZWNvcmQKICAgIGVmZmVjdDogRUZGRUNUX0FMTE9XCiAgLSBhY3Rpb25zOiBbInZpZXc6KiJdCiAgICBkZXJpdmVkUm9sZXM6CiAgICAtIGVtcGxveWVlX3RoYXRfb3duc190aGVfcmVjb3JkCiAgICAtIGRpcmVjdF9tYW5hZ2VyCiAgICBlZmZlY3Q6IEVGRkVDVF9BTExPVwogIC0gYWN0aW9uczogWyJ2aWV3OnB1YmxpYyJdCiAgICBkZXJpdmVkUm9sZXM6CiAgICAtIGFueV9lbXBsb3llZQogICAgZWZmZWN0OiBFRkZFQ1RfQUxMT1cKICAtIGFjdGlvbnM6IFsiYXBwcm92ZSJdCiAgICBjb25kaXRpb246CiAgICAgIG1hdGNoOgogICAgICAgIGV4cHI6IHJlcXVlc3QucmVzb3VyY2UuYXR0ci5zdGF0dXMgPT0gIlBFTkRJTkdfQVBQUk9WQUwiCiAgICBkZXJpdmVkUm9sZXM6CiAgICAtIGRpcmVjdF9tYW5hZ2VyCiAgICBlZmZlY3Q6IEVGRkVDVF9BTExPVwogIHZlcnNpb246ICIyMDIxMDIxMCIK"
      },
      {
        "fileName": "policy_02.yaml",
        "contents": "{{ .Files.Get `store/principal_policies/policy_02.yaml` | base64encode }}",
      }
    ],
    "checkResourceSet": {
      "requestId": "test",
      "actions": [
        "view:public",
        "approve"
      ],
      "principal": {
        "id": "john",
        "policyVersion": "20210210",
        "roles": [
          "employee"
        ],
        "attr": {
          "department": "marketing",
          "geography": "GB",
          "team": "design"
        }
      },
      "resource": {
        "kind": "leave_request",
        "policyVersion": "20210210",
      }
    }
  }
