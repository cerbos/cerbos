---
description: "Donald Duck tries to view and approve a load of leave requests"
wantStatus:
  httpStatusCode: 200
  grpcStatusCode: 0
checkResourceSet:
  input: {
    "requestId": "test",
    "actions": [
      "approve",
      "view:public"
    ],
    "principal": {
      "id": "donald_duck",
      "policyVersion": "20210210",
      "roles": [
        "employee",
      ],
      "attr": {
        "department": "marketing",
        "geography": "GB",
        "team": "design",
        "managed_geographies": "GB"
      }
    },
    "resource": {
      "kind": "leave_request",
      "policyVersion": "20210210",
      "instances": {
        "XX100": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX100",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL",
            "dev_record": true
          }
        },
        "XX101": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX101",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL",
            "dev_record": true
          }
        },
        "XX102": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX102",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL",
            "dev_record": true
          }
        },
        "XX103": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX103",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL",
            "dev_record": true
          }
        },
        "XX104": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX104",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL",
            "dev_record": true
          }
        },
        "XX105": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX105",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL",
            "dev_record": true
          }
        },
        "XX106": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX106",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL",
            "dev_record": true
          }
        },
        "XX107": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX107",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL",
            "dev_record": true
          }
        },
        "XX108": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX108",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL",
            "dev_record": true
          }
        },
        "XX109": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX109",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL",
            "dev_record": true
          }
        },
        "XX110": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX110",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL",
            "dev_record": true
          }
        },
        "XX200": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX200",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL"
          }
        },
        "XX201": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX201",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL"
          }
        },
        "XX202": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX202",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL"
          }
        },
        "XX203": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX203",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL"
          }
        },
        "XX204": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX204",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL"
          }
        },
        "XX205": {
          "attr": {
            "department": "marketing",
            "geography": "GB",
            "id": "XX205",
            "owner": "john",
            "team": "design",
            "status": "PENDING_APPROVAL"
          }
        }
      }
    }
  }
  wantResponse: {
    "requestId": "test",
    "resourceInstances": {
      "XX100": {
        "actions": {
          "approve": "EFFECT_ALLOW",
          "view:public": "EFFECT_ALLOW",
        }
      },
      "XX101": {
        "actions": {
          "approve": "EFFECT_ALLOW",
          "view:public": "EFFECT_ALLOW",
        }
      },
      "XX102": {
        "actions": {
          "approve": "EFFECT_ALLOW",
          "view:public": "EFFECT_ALLOW",
        }
      },
      "XX103": {
        "actions": {
          "approve": "EFFECT_ALLOW",
          "view:public": "EFFECT_ALLOW",
        }
      },
      "XX104": {
        "actions": {
          "approve": "EFFECT_ALLOW",
          "view:public": "EFFECT_ALLOW",
        }
      },
      "XX105": {
        "actions": {
          "approve": "EFFECT_ALLOW",
          "view:public": "EFFECT_ALLOW",
        }
      },
      "XX106": {
        "actions": {
          "approve": "EFFECT_ALLOW",
          "view:public": "EFFECT_ALLOW",
        }
      },
      "XX107": {
        "actions": {
          "approve": "EFFECT_ALLOW",
          "view:public": "EFFECT_ALLOW",
        }
      },
      "XX108": {
        "actions": {
          "approve": "EFFECT_ALLOW",
          "view:public": "EFFECT_ALLOW",
        }
      },
      "XX109": {
        "actions": {
          "approve": "EFFECT_ALLOW",
          "view:public": "EFFECT_ALLOW",
        }
      },
      "XX110": {
        "actions": {
          "approve": "EFFECT_ALLOW",
          "view:public": "EFFECT_ALLOW",
        }
      },
      "XX200": {
        "actions": {
          "approve": "EFFECT_DENY",
          "view:public": "EFFECT_ALLOW",
        }
      },
      "XX201": {
        "actions": {
          "approve": "EFFECT_DENY",
          "view:public": "EFFECT_ALLOW",
        }
      },
      "XX202": {
        "actions": {
          "approve": "EFFECT_DENY",
          "view:public": "EFFECT_ALLOW",
        }
      },
      "XX203": {
        "actions": {
          "approve": "EFFECT_DENY",
          "view:public": "EFFECT_ALLOW",
        }
      },
      "XX204": {
        "actions": {
          "approve": "EFFECT_DENY",
          "view:public": "EFFECT_ALLOW",
        }
      },
      "XX205": {
        "actions": {
          "approve": "EFFECT_DENY",
          "view:public": "EFFECT_ALLOW",
        }
      }
    }
  }
