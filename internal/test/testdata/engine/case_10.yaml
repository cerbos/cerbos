---
description: "No metadata"
schema: "{{ .Files.Get `_schemas/complex.yaml` | b64enc }}"
inputs: [
  {
    "requestId": "test",
    "actions": [
      "view:public"
    ],
    "principal": {
      "id": "john",
      "policyVersion": "20210210",
      "roles": [
        "employee"
      ],
      "attr": {
        "stringField": "hello",
        "intField": 30,
        "list": ["item1", "item2"],
        "objectsInObject": {
          "obj1": {
            "somebool": true,
            "somenumber": 1,
            "somefloat": 1.34,
          },
          "obj2": {
            "somebool": true,
            "somenumber": 1,
            "somefloat": 1.34,
            "somelist": ["listItem1", "listItem2"]
          }
        }
      }
    },
    "resource": {
      "kind": "leave_request",
      "policyVersion": "20210210",
      "id": "XX125",
      "attr": {
        "stringField": "hello",
        "intField": 30,
        "department": "marketing",
        "geography": "GB",
        "id": "XX125",
        "owner": "john",
        "team": "design"
      }
    }
  }
]
wantOutputs: [
  {
    "requestId": "test",
    "resourceId": "XX125",
    "actions": {
      "view:public": {
        "effect": "EFFECT_ALLOW",
        "policy": "resource.leave_request.v20210210"
      },
    },
    "effectiveDerivedRoles": [
      "employee_that_owns_the_record",
      "any_employee"
    ]
  }
]
