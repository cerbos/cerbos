# yaml-language-server: $schema=../.jsonschema/EngineTestCase.schema.json
---
description: P.derivedRoles
inputs:
  - requestId: test
    actions:
      - test
    principal:
      id: andy
      roles:
        - employee
    resource:
      kind: principal_derived_roles
      id: test
wantOutputs:
  - requestId: test
    resourceId: test
    effectiveDerivedRoles:
      - one
      - two
    actions:
      test:
        effect: EFFECT_ALLOW
        policy: resource.principal_derived_roles.vdefault
    outputs:
      - src: resource.principal_derived_roles.vdefault#test
        val:
          - one
          - two
